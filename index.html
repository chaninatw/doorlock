<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fullscreen Video + Countdown</title>
<style>
  :root{
    --ui-bg: rgba(0,0,0,.55);
    --ui-border: rgba(255,255,255,.25);
    --accent: #9fd3ff;
  }
  html, body {
    height: 100%;
    margin: 0;
    background: #000;
    color: #fff;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  }
  /* Fullscreen video container */
  .stage {
    position: fixed;
    inset: 0;
    overflow: hidden;
    background: #000;
  }
  /* Maintain 16:9 while filling the screen */
  video#bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;          /* fill screen */
    object-position: center;
    aspect-ratio: 16 / 9;       /* hint for some browsers */
    filter: brightness(0.9);
  }

  /* Overlay UI */
  .overlay {
    position: fixed;
    inset: 0;
    display: grid;
    grid-template-rows: auto 1fr auto;
    gap: 1rem;
    pointer-events: none; /* let clicks pass through by default */
  }
  .panel {
    pointer-events: auto; /* enable interaction */
    background: var(--ui-bg);
    border: 1px solid var(--ui-border);
    border-radius: 12px;
    backdrop-filter: blur(6px);
    box-shadow: 0 6px 30px rgba(0,0,0,.35);
  }
  .topbar, .bottombar {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .75rem;
    margin: 1rem;
    flex-wrap: wrap;
  }
  .spacer { flex: 1; }

  /* Timer display (center) */
  .timer-wrap {
    display: grid;
    place-items: center;
    padding: 1rem;
  }
  .timer {
    text-align: center;
    line-height: 1;
  }
  .timer .main {
    font-weight: 700;
    letter-spacing: 0.04em;
    font-variant-numeric: tabular-nums;
    text-shadow: 0 2px 30px rgba(0,0,0,.5);
  }
  /* Responsive sizing for the big timer */
  @media (min-width: 1024px) {
    .timer .main { font-size: clamp(64px, 13vw, 160px); }
  }
  @media (max-width: 1023.98px) {
    .timer .main { font-size: clamp(48px, 14vw, 120px); }
  }
  .timer .sub {
    margin-top: .5rem;
    opacity: .9;
    font-size: clamp(12px, 2.5vw, 16px);
  }

  /* Buttons + inputs */
  button, input, select, label {
    font: inherit;
    color: #fff;
  }
  button, .btn {
    background: transparent;
    border: 1px solid var(--ui-border);
    padding: .55rem .9rem;
    border-radius: 10px;
    cursor: pointer;
    transition: transform .02s ease-in-out, background .2s ease-in-out, border-color .2s;
  }
  button:hover { background: rgba(255,255,255,.06); }
  button:active { transform: scale(.98); }
  .primary {
    border-color: #66b6ff88;
    background: linear-gradient(180deg, #2563eb33, #1d4ed833);
  }
  .danger {
    border-color: #ff7b7b88;
    background: linear-gradient(180deg, #ef444433, #dc262633);
  }
  .ok {
    border-color: #7bffbb88;
    background: linear-gradient(180deg, #22c55e33, #16a34a33);
  }
  .field {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    padding: .4rem .6rem;
    border: 1px solid var(--ui-border);
    border-radius: 10px;
    background: rgba(0,0,0,.35);
  }
  .field input[type="number"],
  .field input[type="text"] {
    width: 6ch;
    padding: .35rem .25rem;
    background: transparent;
    border: none;
    outline: none;
  }
  .field input[type="text"] { width: min(42vw, 28ch); }

  /* Badges */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: .45rem;
    padding: .35rem .6rem;
    border-radius: 999px;
    border: 1px solid var(--ui-border);
    background: rgba(0,0,0,.35);
    font-size: .9rem;
  }
  .dot {
    width: .6rem; height: .6rem; border-radius: 50%;
    background: #aaa;
    box-shadow: 0 0 18px rgba(255,255,255,.25) inset;
  }
  .dot.playing { background: #22c55e; }
  .dot.paused { background: #f59e0b; }
  .dot.stopped { background: #ef4444; }

  .links { opacity: .85; font-size: .9rem; }

  /* Make controls comfy on phones */
  @media (max-width: 640px) {
    .topbar, .bottombar { margin: .75rem; padding: .6rem; gap: .5rem; }
    .field input[type="text"] { width: min(60vw, 22ch); }
    .timer .sub { font-size: 12px; }
  }
</style>
</head>
<body>
  <div class="stage" id="stage">
    <!-- Set your default video source in data-src (or use the controls to load one) -->
    <video id="bg" data-src="" preload="metadata" muted playsinline></video>
  </div>

  <div class="overlay">
    <!-- Top controls: video play/load + status -->
    <div class="topbar panel">
      <button id="playBtn" class="primary">▶ Play (Fullscreen)</button>
      <div class="field" title="Paste a direct video URL (mp4/webm)">
        <label for="videoUrl">Video URL</label>
        <input id="videoUrl" type="text" placeholder="https://example.com/video.mp4" />
        <button id="loadUrlBtn" class="btn">Load</button>
      </div>
      <div class="field" title="Or choose a local video file">
        <label for="fileInput">File</label>
        <input id="fileInput" type="file" accept="video/*" />
      </div>
      <span class="spacer"></span>
      <span class="badge" id="statusBadge"><span class="dot stopped" id="statusDot"></span><span id="statusText">Stopped</span></span>
    </div>

    <!-- Center: big countdown -->
    <div class="timer-wrap">
      <div class="timer">
        <div class="main" id="timeDisplay">80:00</div>
        <div class="sub" id="hint">SPACE = Start/Pause • R = Reset • F = Fullscreen • ↑/↓ = +1/-1 min</div>
      </div>
    </div>

    <!-- Bottom controls: timer set/start/pause/reset -->
    <div class="bottombar panel">
      <div class="field" title="Set minutes and seconds">
        <label for="minInput">Set</label>
        <input id="minInput" type="number" min="0" value="80" /> min
        <input id="secInput" type="number" min="0" max="59" value="0" /> sec
        <button id="setBtn" class="btn">Apply</button>
      </div>

      <button id="startBtn" class="ok">Start / Resume</button>
      <button id="pauseBtn">Pause</button>
      <button id="resetBtn" class="danger">Reset</button>

      <span class="spacer"></span>
      <div class="links">
        <span>Volume is muted by default (browser policy). Unmute via the video’s context menu or add controls in code if needed.</span>
      </div>
    </div>
  </div>

<script>
(function(){
  const video = document.getElementById('bg');
  const playBtn = document.getElementById('playBtn');
  const fileInput = document.getElementById('fileInput');
  const videoUrl = document.getElementById('videoUrl');
  const loadUrlBtn = document.getElementById('loadUrlBtn');

  const timeDisplay = document.getElementById('timeDisplay');
  const minInput = document.getElementById('minInput');
  const secInput = document.getElementById('secInput');
  const setBtn = document.getElementById('setBtn');
  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resetBtn = document.getElementById('resetBtn');

  const statusDot = document.getElementById('statusDot');
  const statusText = document.getElementById('statusText');

  // INITIAL VIDEO SOURCE (optional): put your URL in data-src attribute
  const initialSrc = video.getAttribute('data-src').trim();
  if (initialSrc) applyVideoSrc(initialSrc);

  // Timer state
  let totalSeconds = 80 * 60;  // default 80:00
  let remaining = totalSeconds;
  let ticking = false;
  let rafId = null;
  let lastTs = null;

  function setStatus(mode) {
    statusDot.classList.remove('playing','paused','stopped');
    statusDot.classList.add(mode);
    statusText.textContent = mode[0].toUpperCase() + mode.slice(1);
  }

  function formatTime(s) {
    if (s < 0) s = 0;
    const m = Math.floor(s / 60);
    const sec = Math.floor(s % 60);
    return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
  }

  function render() {
    timeDisplay.textContent = formatTime(remaining);
  }

  function tick(ts) {
    if (!ticking) return;
    if (lastTs == null) lastTs = ts;
    const dt = (ts - lastTs) / 1000;
    lastTs = ts;
    remaining -= dt;
    if (remaining <= 0) {
      remaining = 0;
      ticking = false;
      setStatus('stopped');
      render();
      // Optional beep or flash could be added here.
      return;
    }
    render();
    rafId = requestAnimationFrame(tick);
  }

  function startTimer() {
    if (remaining <= 0) return;
    if (!ticking) {
      ticking = true;
      setStatus('playing');
      lastTs = null;
      rafId = requestAnimationFrame(tick);
    }
  }

  function pauseTimer() {
    if (ticking) {
      ticking = false;
      setStatus('paused');
      if (rafId) cancelAnimationFrame(rafId);
      rafId = null;
      lastTs = null;
    }
  }

  function resetTimer() {
    ticking = false;
    if (rafId) cancelAnimationFrame(rafId);
    rafId = null;
    lastTs = null;
    remaining = totalSeconds;
    render();
    setStatus('stopped');
  }

  function applySetFromInputs() {
    const m = Math.max(0, parseInt(minInput.value || '0', 10));
    let s = Math.max(0, parseInt(secInput.value || '0', 10));
    if (s > 59) s = 59;
    totalSeconds = (m * 60) + s;
    remaining = totalSeconds;
    render();
  }

  // VIDEO HELPERS
  function applyVideoSrc(src){
    try {
      video.src = src;
      video.load();
    } catch(e) {
      console.error(e);
      alert('Invalid video URL.');
    }
  }

  async function goFullscreenAndPlay() {
    // If no source yet, try URL field; else do nothing.
    if (!video.src || video.src === window.location.href) {
      const url = videoUrl.value.trim();
      if (url) applyVideoSrc(url);
    }
    try {
      if (video.paused) await video.play();
      if (!document.fullscreenElement) {
        const stage = document.getElementById('stage');
        await stage.requestFullscreen({ navigationUI: "hide" });
      }
      setStatus(video.paused ? 'paused' : 'playing');
    } catch (err) {
      console.warn('Autoplay may require user interaction or muted video.', err);
      alert('Could not start playback. Try ensuring the video is muted or interact with the page first.');
    }
  }

  // EVENTS
  playBtn.addEventListener('click', goFullscreenAndPlay);
  loadUrlBtn.addEventListener('click', () => {
    const url = videoUrl.value.trim();
    if (url) applyVideoSrc(url);
  });
  fileInput.addEventListener('change', (e)=>{
    const file = e.target.files?.[0];
    if (!file) return;
    const blobUrl = URL.createObjectURL(file);
    applyVideoSrc(blobUrl);
  });

  setBtn.addEventListener('click', ()=>{
    applySetFromInputs();
    setStatus('stopped');
  });
  startBtn.addEventListener('click', startTimer);
  pauseBtn.addEventListener('click', pauseTimer);
  resetBtn.addEventListener('click', resetTimer);

  video.addEventListener('play', ()=> setStatus('playing'));
  video.addEventListener('pause', ()=> ticking ? setStatus('playing') : setStatus('paused'));
  video.addEventListener('ended', ()=> setStatus('stopped'));

  // Keyboard shortcuts
  document.addEventListener('keydown', (e)=>{
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
    if (e.code === 'Space') { e.preventDefault(); ticking ? pauseTimer() : startTimer(); }
    else if (e.key.toLowerCase() === 'r') { resetTimer(); }
    else if (e.key.toLowerCase() === 'f') {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen({ navigationUI: "hide" });
      else document.exitFullscreen();
    }
    else if (e.key === 'ArrowUp') { totalSeconds += 60; remaining += 60; render(); }
    else if (e.key === 'ArrowDown') { totalSeconds = Math.max(0, totalSeconds - 60); remaining = Math.max(0, remaining - 60); render(); }
  });

  // Initialize display
  render();

  // Keep 16:9 feel on resize (object-fit handles most cases)
  window.addEventListener('resize', ()=>{/* no-op, CSS handles it */});
})();
</script>
</body>
</html>
